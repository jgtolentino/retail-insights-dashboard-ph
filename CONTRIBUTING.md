# Contributing Guide

## Development Setup

### Prerequisites
- Node.js 18+ 
- npm 9+
- Git

### Quick Start
```bash
git clone <repo>
cd retail-insights-dashboard-ph
npm install
npm run dev
```

## Core Technology Stack

### Frontend Framework
- **React 18.3.1** - UI framework
- **TypeScript 5.5.3** - Type safety
- **Vite 5.4.1** - Build tool and dev server

### UI Components  
- **@radix-ui/** - Headless UI components
- **Tailwind CSS 3.4.11** - Utility-first styling
- **Lucide React** - Icon library

### Data & Charts
- **@supabase/supabase-js 2.49.8** - Database client
- **Recharts 2.15.3** - Chart library
- **React Leaflet 4.2.1** - Maps
- **@tanstack/react-query 5.56.2** - Data fetching

### Development Tools
- **ESLint 9.9.0** - Code linting
- **Prettier 3.5.3** - Code formatting
- **Playwright 1.52.0** - E2E testing
- **Vitest** - Unit testing

## Development Workflow

### 1. Before Making Changes
```bash
# Run diagnostic checks
npm run debug

# Ensure dev server works
npm run dev
```

### 2. Making Changes
- Follow existing code patterns
- Use TypeScript for type safety
- Add error boundaries to new chart components
- Test changes locally before committing

### 3. Code Quality
```bash
# Lint and format
npm run lint
npm run format

# Run tests
npm test
npm run test:e2e
```

### 4. Commit Standards
- Use descriptive commit messages
- Include component/feature being changed
- Reference issue numbers when applicable

## Component Guidelines

### Chart Components
- Must wrap in `<ChartErrorBoundary>`
- Use `safe()` utility for object rendering
- Follow existing props interface patterns

### API Endpoints
- Place in `/api/` directory
- Return consistent JSON structure
- Include proper error handling

### Hooks
- Follow `use` naming convention
- Include TypeScript interfaces
- Handle loading/error states

## Database Guidelines

### Supabase Queries
- Use `total_amount` not `amount` (auto-fixed by debug system)
- Include proper error handling
- Test queries with various parameters

### Column Names
- Follow snake_case convention
- Use descriptive names
- Avoid reserved keywords

## Testing

### Unit Tests
```bash
npm test
```

### Integration Tests  
```bash
npm run test:integration
```

### E2E Tests
```bash
npm run test:e2e
```

### Manual Testing
1. Run `npm run debug:runtime`
2. Check browser console for errors
3. Test all chart interactions
4. Verify API responses

## Debug & Monitoring

### Auto-Fix System
```bash
npm run debug           # Static analysis & fixes
npm run debug:runtime   # Live app testing  
npm run monitor         # Continuous monitoring
```

### Common Auto-Fixes
- Supabase column name corrections
- Missing error boundaries
- Required component creation
- Import statement updates

## Deployment

### Pre-Deployment
```bash
npm run build
npm run test:all
npm run debug
```

### Vercel Deployment
```bash
npm run deploy:safe
```

## Architecture

### Project Structure
```
src/
├── components/      # Reusable UI components
├── hooks/          # Custom React hooks  
├── pages/          # Route components
├── services/       # API services
├── utils/          # Helper functions
└── styles/         # Global styles

api/                # Serverless functions
scripts/            # Build and utility scripts
```

### State Management
- React Query for server state
- React hooks for local state
- Context for global app state

## Performance

### Bundle Size
- Keep under 10MB built size
- Use dynamic imports for large components
- Monitor with `npm run benchmark`

### Response Times
- API endpoints < 200ms
- Page loads < 2 seconds
- Charts render < 500ms

## Security

### Environment Variables
- Never commit secrets
- Use Vercel environment variables
- Test with `npm run verify:env`

### Data Handling
- Validate all user inputs
- Sanitize database queries
- Use proper CORS settings

## Getting Help

### Debug Issues
1. Run `npm run debug`
2. Check TROUBLESHOOTING.md
3. Review console errors
4. Test API endpoints individually

### Escalation
Contact team if:
- Auto-fixes don't resolve issues
- Build fails after multiple attempts  
- Performance degrades significantly
- Security concerns identified

---
Updated: Auto-generated by development system